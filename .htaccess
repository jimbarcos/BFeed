# BuzzarFeed .htaccess Configuration
# Simplified for InfinityFree compatibility

# Enable Rewrite Engine
RewriteEngine On

# Custom Error Pages
ErrorDocument 400 /error/400.php
ErrorDocument 401 /error/401.php
ErrorDocument 403 /error/403.php
ErrorDocument 404 /error/404.php
ErrorDocument 500 /error/500.php
ErrorDocument 503 /error/503.php

# Remove .php extension from URLs
# Skip if file or directory exists
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
# Check if .php file exists
RewriteCond %{REQUEST_FILENAME}.php -f
# Rewrite to add .php extension
RewriteRule ^(.*)$ $1.php [L]

# Redirect .php URLs to clean URLs (301 permanent redirect)
RewriteCond %{THE_REQUEST} ^GET\ (.*)\.php\ HTTP
RewriteRule ^(.*)\.php$ /$1 [R=301,L]

# Disable Directory Browsing
Options -Indexes

# Protect sensitive files
<FilesMatch "^(config\.php|\.htaccess|\.env)$">
    Order allow,deny
    Deny from all
</FilesMatch>

# Charset
AddDefaultCharset UTF-8
